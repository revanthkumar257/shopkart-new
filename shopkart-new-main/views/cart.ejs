<%- include('partials/head', { title, initialPush, cartCount }) %>
  <h2>Your Cart</h2>
  <% if (!items.length) { %>
    <p>Your cart is empty. Browse the <a href="/plp">catalog</a>.</p>
  <% } else { %>
    <table>
      <thead>
        <tr>
          <th></th>
          <th>Product</th>
          <th>Price</th>
          <th>Qty</th>
          <th>Subtotal</th>
          <th></th>
        </tr>
      </thead>
      <tbody>
        <% items.forEach((item) => { %>
          <tr>
            <td style="width:80px;">
              <% if (item.image) { %>
                <img src="<%= encodeURI(item.image) %>" alt="<%= item.productName %>" style="width:64px;height:64px;object-fit:cover;border-radius:8px;" />
              <% } %>
            </td>
            <td><%= item.productName %><br/><span class="muted"><%= item.brand %></span></td>
            <td>$<%= item.price %></td>
            <td><%= item.qty %></td>
            <td>$<%= (item.price * item.qty).toFixed(2) %></td>
            <td>
              <button class="button secondary" data-action="remove-item" data-product-id="<%= item.productId %>">Remove</button>
            </td>
          </tr>
        <% }) %>
      </tbody>
    </table>
    <div class="summary">
      <p><strong>Total:</strong> $<%= total.toFixed(2) %></p>
      <a class="button primary" href="/checkout">Proceed to checkout</a>
    </div>
  <% } %>
<%- include('partials/footer') %>

